name: nodejs
# Trigger the workflow on push or pull_request
on:
  - push
  - pull_request

env:
 CI: true  

jobs:
 build:
  # The type of machine to run the job on
  runs-on: ubuntu-latest
  strategy:
    # Node versions list
    matrix:
      node-version: [19.x]
      
  steps:
    - uses: 
        actions/checkout@v2
    - name: 
        Use Node.js ${{ matrix.node-version }}
      uses: 
        actions/setup-node@v2
      with: 
        node-version: ${{ matrix.node-version }}
        cashe: "npm"
    
    - run: make install
    - run: make lint  
    - run: make test
    - name: Test & publish code coverage
      uses: paambaat1/codeclimate-action@v3.0.0
      env:
        CC_TEST_REPORTER_ID: ${{ secret.ILYA67COVERAGEKEY }}
      with: 
        coverageCommand: make test --coverage
        debug: true
